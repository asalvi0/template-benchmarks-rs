# Rust template engine benchmarks

This repo tries to assess Rust template engine performance. Following the
download ratings from [crates.io][crates], these nine projects are assessed:

- [write!][write]: The std library `write!` macro
- [Handlebars][handlebars]: Handlebars templating implemented in Rust
- [Tera][tera]: Template engine based on Jinja2/Django templates
- [Liquid][liquid]: The liquid templating language for Rust
- [Askama][askama]: Type-safe, compiled Jinja-like templates for Rust
- [horrorshow][horrorshow]: A templating library written in rust macros
- [ructe][ructe]: Rust Compiled Templates, efficient type-safe web page templates
- [fomat][fomat]: Alternative syntax for print/write/format-like macros with a small templating language
- [markup][markup]: A blazing fast, type-safe template engine for Rust.
- [maud][maud]: A Compile-time HTML template engine for Rust.
- [sailfish][sailfish]: Simple, small, and extremely fast template engine for Rust
- [minijinja][minijinja]: A powerful but minimal dependency template engine for Rust compatible with Jinja/Jinja2

[crates]: https://crates.io/categories/template-engine
[write]: https://doc.rust-lang.org/std/macro.write.html
[handlebars]: https://github.com/sunng87/handlebars-rust
[tera]: https://github.com/Keats/tera
[liquid]: https://github.com/cobalt-org/liquid-rust
[askama]: https://github.com/djc/askama
[ructe]: https://github.com/kaj/ructe
[horrorshow]: https://github.com/Stebalien/horrorshow-rs
[fomat]: https://github.com/krdln/fomat-macros
[markup]: https://github.com/utkarshkukreti/markup.rs
[sailfish]: https://github.com/Kogia-sima/sailfish
[maud]: https://github.com/lambda-fairy/maud
[minijinja]: https://github.com/mitsuhiko/minijinja

## Results

These results are from Nov 19, 2023 (rustc 1.74.0), running on an MacBook Pro 16 (2021) M1 Pro CPU. Your mileage may vary.

As a [violin plot] generated by [Criterion]:

![Big table violin plot](big-table.svg)
![Teams violin plot](teams.svg)

[violin plot]: https://en.wikipedia.org/wiki/Violin_plot
[Criterion]: https://japaric.github.io/criterion.rs/

Numbers, as output by Criterion:

```
Big table/Askama        time:   [255.79 µs 256.61 µs 257.43 µs]
Big table/fomat         time:   [184.68 µs 185.60 µs 186.51 µs]
Big table/Handlebars    time:   [2.9309 ms 2.9425 ms 2.9542 ms]
Big table/Horrorshow    time:   [142.35 µs 142.91 µs 143.49 µs]
Big table/Liquid        time:   [3.4438 ms 3.4545 ms 3.4655 ms]
Big table/Markup        time:   [45.573 µs 45.803 µs 46.041 µs]
Big table/Maud          time:   [69.714 µs 70.043 µs 70.384 µs]
Big table/Ructe         time:   [174.57 µs 175.57 µs 176.56 µs]
Big table/Sailfish      time:   [14.982 µs 15.032 µs 15.086 µs]
Big table/Tera          time:   [718.23 µs 721.95 µs 725.50 µs]
Big table/MiniJinja     time:   [684.77 ns 687.14 ns 689.57 ns]
Big table/write         time:   [206.81 µs 207.80 µs 208.82 µs]

Teams/Askama            time:   [440.87 ns 442.42 ns 443.94 ns]
Teams/fomat             time:   [290.81 ns 291.83 ns 292.95 ns]
Teams/Handlebars        time:   [2.8247 µs 2.8340 µs 2.8429 µs]
Teams/Horrorshow        time:   [250.75 ns 251.61 ns 252.52 ns]
Teams/Liquid            time:   [3.5359 µs 3.5490 µs 3.5630 µs]
Teams/Markup            time:   [111.40 ns 111.68 ns 111.98 ns]
Teams/Maud              time:   [143.30 ns 144.01 ns 144.72 ns]
Teams/Ructe             time:   [391.85 ns 393.21 ns 394.60 ns]
Teams/Sailfish          time:   [74.091 ns 74.258 ns 74.433 ns]
Teams/Tera              time:   [2.5375 µs 2.5477 µs 2.5589 µs]
Teams/MiniJinja         time:   [1.4894 µs 1.5065 µs 1.5354 µs]
Teams/write             time:   [403.17 ns 404.54 ns 406.00 ns]
```

## Running the benchmarks

```bash
$ cargo bench
```

Plots will be rendered if `gnuplot` is installed and will be available in the
`target/criterion` folder.
