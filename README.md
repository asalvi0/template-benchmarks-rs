# Rust template engine benchmarks

This repo tries to assess Rust template engine performance. Templating engines are grouped into two broad categories:

## Compiled Templates

> These engines require you to rebuild when a template changes.

- [write!][write]: The std library `write!` macro
- [Askama][askama]: Type-safe, compiled Jinja-like templates for Rust
- [Horrorshow][horrorshow]: A macro-based html builder for rust
- [Ructe][ructe]: Rust Compiled Templates with static-file handling
- [fomat][fomat]: Alternative syntax for printing macros in Rust
- [Markup][markup]: A blazing fast, type-safe template engine for Rust
- [Maud][maud]: Compile-time HTML templates for Rust
- [Sailfish][sailfish]: Simple, small, and extremely fast template engine for Rust

[write]: https://doc.rust-lang.org/std/macro.write.html
[askama]: https://github.com/djc/askama
[horrorshow]: https://github.com/Stebalien/horrorshow-rs
[ructe]: https://github.com/kaj/ructe
[fomat]: https://github.com/krdln/fomat-macros
[markup]: https://github.com/utkarshkukreti/markup.rs
[maud]: https://github.com/lambda-fairy/maud
[sailfish]: https://github.com/Kogia-sima/sailfish

## Runtime Templates

> These engines do not require a rebuild of your rust codebase when a template changes.

- [Handlebars][handlebars]: Rust templating with Handlebars
- [Tera][tera]: A template engine for Rust based on Jinja2/Django
- [Liquid][liquid]: Liquid templating for Rust
- [MiniJinja][minijinja]: A powerful but minimal dependency template engine for Rust compatible with Jinja/Jinja2
- [Ramhorns][ramhorns]: Fast Mustache template engine implementation in pure Rust

[handlebars]: https://github.com/sunng87/handlebars-rust
[tera]: https://github.com/Keats/tera
[liquid]: https://github.com/cobalt-org/liquid-rust
[minijinja]: https://github.com/mitsuhiko/minijinja
[ramhorns]: https://github.com/maciejhirsz/ramhorns

## Results

> These results are from Dec 2, 2023 (rustc 1.74.0), running on an MacBook Pro 16 (M1 Pro)

As a [violin plot] generated by [Criterion]:

[violin plot]: https://en.wikipedia.org/wiki/Violin_plot
[Criterion]: https://japaric.github.io/criterion.rs/

![Big table violin plot](big-table.svg)

```
Compiled:
Big table/write         time:   [205.50 µs 206.07 µs 206.66 µs]
Big table/Askama        time:   [264.75 µs 265.70 µs 266.60 µs]
Big table/Horrorshow    time:   [138.80 µs 139.17 µs 139.56 µs]
Big table/Ructe         time:   [170.19 µs 170.80 µs 171.45 µs]
Big table/fomat         time:   [190.36 µs 190.96 µs 191.56 µs]
Big table/Markup        time:   [114.47 µs 115.05 µs 115.64 µs]
Big table/Maud          time:   [70.042 µs 70.729 µs 71.411 µs]
Big table/Sailfish      time:   [16.861 µs 16.889 µs 16.921 µs]

Runtime:
Big table/Handlebars    time:   [3.4987 ms 3.5062 ms 3.5137 ms]
Big table/Tera          time:   [715.97 µs 730.76 µs 750.73 µs]
Big table/Liquid        time:   [3.7191 ms 3.7273 ms 3.7354 ms]
Big table/MiniJinja     time:   [686.19 ns 688.18 ns 690.26 ns]
Big table/Ramhorns      time:   [230.42 µs 231.20 µs 231.95 µs]
```

![Teams violin plot](teams.svg)

```
Compiled:
Teams/write             time:   [417.88 ns 419.69 ns 421.55 ns]
Teams/Askama            time:   [347.03 ns 347.57 ns 348.17 ns]
Teams/Horrorshow        time:   [253.27 ns 253.66 ns 254.10 ns]
Teams/Ructe             time:   [393.19 ns 394.39 ns 395.70 ns]
Teams/fomat             time:   [293.32 ns 293.61 ns 293.90 ns]
Teams/Markup            time:   [153.72 ns 154.14 ns 154.55 ns]
Teams/Maud              time:   [146.17 ns 146.80 ns 147.43 ns]
Teams/Sailfish          time:   [77.572 ns 77.990 ns 78.438 ns]

Runtime:
Teams/Handlebars        time:   [2.8412 µs 2.8457 µs 2.8506 µs]
Teams/Tera              time:   [2.0566 µs 2.0600 µs 2.0642 µs]
Teams/Liquid            time:   [3.5931 µs 3.5993 µs 3.6060 µs]
Teams/MiniJinja         time:   [1.5714 µs 1.5753 µs 1.5793 µs]
Teams/Ramhorns          time:   [313.05 ns 314.32 ns 315.85 ns]
```

## Running the benchmarks

```bash
cargo bench
```

Plots will be rendered if `gnuplot` is installed and will be available in the `target/criterion` folder.
